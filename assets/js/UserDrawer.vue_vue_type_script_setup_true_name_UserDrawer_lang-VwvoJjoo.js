import{d as w,R as T,i as p,r as t,o as m,h as c,w as o,b as l,e as i,a5 as B,aH as F,c as L,f as M,u as N,F as R,a as b,P as S}from"./index-DXAYGgIA.js";import{a as $,U as z}from"./Imgs-DGPqRp0H.js";const A=[{label:"男",value:1},{label:"女",value:2}],J=[{label:"启用",value:1,tagType:"success"},{label:"禁用",value:0,tagType:"danger"}],D=b("span",null,"请上传头像",-1),E=b("span",null,"请上传照片",-1),I=w({name:"UserDrawer"}),K=w({...I,setup(H,{expose:g}){const V=T({avatar:[{required:!0,message:"请上传用户头像"}],photo:[{required:!0,message:"请上传用户照片"}],username:[{required:!0,message:"请填写用户姓名"}],gender:[{required:!0,message:"请选择性别"}],idCard:[{required:!0,message:"请填写身份证号"}],email:[{required:!0,message:"请填写邮箱"}],address:[{required:!0,message:"请填写居住地址"}]}),s=p(!1),e=p({isView:!1,title:"",row:{}}),U=d=>{e.value=d,s.value=!0},v=p(),x=()=>{v.value.validate(async d=>{if(d)try{await e.value.api(e.value.row),S.success({message:`${e.value.title}用户成功！`}),e.value.getTableList(),s.value=!1}catch{}})};return g({acceptParams:U}),(d,r)=>{const y=t("Avatar"),_=t("el-icon"),u=t("el-form-item"),h=t("Picture"),n=t("el-input"),k=t("el-option"),q=t("el-select"),C=t("el-form"),f=t("el-button"),P=t("el-drawer");return m(),c(P,{modelValue:s.value,"onUpdate:modelValue":r[8]||(r[8]=a=>s.value=a),"destroy-on-close":!0,size:"450px",title:`${e.value.title}用户`},{footer:o(()=>[l(f,{onClick:r[7]||(r[7]=a=>s.value=!1)},{default:o(()=>[i("取消")]),_:1}),B(l(f,{type:"primary",onClick:x},{default:o(()=>[i("确定")]),_:1},512),[[F,!e.value.isView]])]),default:o(()=>[l(C,{ref_key:"ruleFormRef",ref:v,"label-width":"100px","label-suffix":" :",rules:V,disabled:e.value.isView,model:e.value.row,"hide-required-asterisk":e.value.isView},{default:o(()=>[l(u,{label:"用户头像",prop:"avatar"},{default:o(()=>[l($,{"image-url":e.value.row.avatar,"onUpdate:imageUrl":r[0]||(r[0]=a=>e.value.row.avatar=a),width:"135px",height:"135px","file-size":3},{empty:o(()=>[l(_,null,{default:o(()=>[l(y)]),_:1}),D]),tip:o(()=>[i(" 头像大小不能超过 3M ")]),_:1},8,["image-url"])]),_:1}),l(u,{label:"用户照片",prop:"photo"},{default:o(()=>[l(z,{"file-list":e.value.row.photo,"onUpdate:fileList":r[1]||(r[1]=a=>e.value.row.photo=a),height:"140px",width:"140px","border-radius":"50%"},{empty:o(()=>[l(_,null,{default:o(()=>[l(h)]),_:1}),E]),tip:o(()=>[i(" 照片大小不能超过 5M ")]),_:1},8,["file-list"])]),_:1}),l(u,{label:"用户姓名",prop:"username"},{default:o(()=>[l(n,{modelValue:e.value.row.username,"onUpdate:modelValue":r[2]||(r[2]=a=>e.value.row.username=a),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"性别",prop:"gender"},{default:o(()=>[l(q,{modelValue:e.value.row.gender,"onUpdate:modelValue":r[3]||(r[3]=a=>e.value.row.gender=a),placeholder:"请选择性别",clearable:""},{default:o(()=>[(m(!0),L(R,null,M(N(A),a=>(m(),c(k,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"身份证号",prop:"idCard"},{default:o(()=>[l(n,{modelValue:e.value.row.idCard,"onUpdate:modelValue":r[4]||(r[4]=a=>e.value.row.idCard=a),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"邮箱",prop:"email"},{default:o(()=>[l(n,{modelValue:e.value.row.email,"onUpdate:modelValue":r[5]||(r[5]=a=>e.value.row.email=a),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"居住地址",prop:"address"},{default:o(()=>[l(n,{modelValue:e.value.row.address,"onUpdate:modelValue":r[6]||(r[6]=a=>e.value.row.address=a),placeholder:"请填写居住地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{K as _,A as g,J as u};
